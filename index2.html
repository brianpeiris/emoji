<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <title>Emoji Test</title>
  <meta name="Emoji Test" content="Emoji Test">
  <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
  <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
  <script src="bundle.js?v=2"></script>
  <script>
    AFRAME.registerComponent('collapse-model', {
      init: function () {
        this.el.addEventListener('model-loaded', function () {
          this.el.setObject3D('mesh', this.el.object3DMap.mesh.children[0]);
          this.el.emit('object3dset', {type: 'mesh'});
        }.bind(this));
      }
    });
  </script>

</head>
<body>

  <!-- Create the Scene -->

<a-scene altspace="verticalAlign: middle; fullspace: true" vr-mode-ui="enabled: false" sync-system="author: Phil; app: emoji">

  <!-- Asset Loading -->

  <a-assets>

    <!-- Loading OBJ Models to Asset Manager -->

    <a-asset-item id="earsb-mtl" src="earsb.mtl"></a-asset-item>
    <a-asset-item id="earsb-obj" src="ears.obj"></a-asset-item>
    <a-asset-item id="earsp-mtl" src="earsp.mtl"></a-asset-item>
    <a-asset-item id="earsp-obj" src="ears.obj"></a-asset-item>


    <a-asset-item id="basket-mtl" src="basket.mtl"></a-asset-item>
    <a-asset-item id="basket-obj" src="basket.obj"></a-asset-item>
    <a-asset-item id="carrot-mtl" src="carrot.mtl"></a-asset-item>
    <a-asset-item id="carrot-obj" src="carrot.obj"></a-asset-item>
    <a-asset-item id="golden-egg-mtl" src="golden-egg.mtl"></a-asset-item>
    <a-asset-item id="golden-egg-obj" src="golden-egg.obj"></a-asset-item>

    <!-- Loading Images to Asset Manager -->

    <img id="earsb-icon" src="earsb-icon.jpg"/>
    <img id="suitb-icon" src="tail-icon.jpg"/>
    <img id="earsp-icon" src="earsp-icon.jpg"/>
    <img id="suitp-icon" src="duck-icon.jpg"/>
    <img id="carrot-icon" src="carrot-icon.jpg"/>
    <img id="basket-icon" src="basket-icon.jpg"/>
    <img id="egg-icon" src="egg-icon.jpg"/>
    <img id="egg1" src="egg1.1024x512.jpg"/>
    <img id="collected" src="collected.jpg"/>
    <img id="rules" src="rules.jpg"/>

    <!-- Adding Mixins to the Asset Manager -->

    <a-mixin id="earsb" cached-obj-model="obj: #earsb-obj; mtl: #earsb-mtl" collapse-model scale="1.1 1.1 1.1"></a-mixin>

    <a-mixin id="earsb-head" rotation="0 180 0" n-skeleton-parent="part: head;" position="0 0.06 0" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="suitb" cached-obj-model="obj: #suitb-obj; mtl: #suitb-mtl" collapse-model scale="0.3 0.3 0.3"></a-mixin>

    <a-mixin id="suitb-spine" rotation="0 180 0" n-skeleton-parent="part: spine;" position="0 -0.15 0.05" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="earsp" cached-obj-model="obj: #earsp-obj; mtl: #earsp-mtl" collapse-model scale="1.1 1.1 1.1"></a-mixin>

    <a-mixin id="earsp-head" rotation="0 180 0" n-skeleton-parent="part: head;" position="0 0.06 0" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="suitp" cached-obj-model="obj: #suitp-obj; mtl: #suitp-mtl" collapse-model scale="1 1 1"></a-mixin>

    <a-mixin id="suitp-spine" rotation="0 -90 0" n-skeleton-parent="part: spine;" position="0 -0.4 -0.05" sync sync-n-skeleton-parent></a-mixin>

    <a-mixin id="carrot" cached-obj-model="obj: #carrot-obj; mtl: #carrot-mtl" collapse-model scale="65 65 65"></a-mixin>

    <a-mixin id="carrot-hand" rotation="0 90 0" n-skeleton-parent="part: hand; side: right; index: 0" position="-0.03 -0.03 -0.075" sync sync-n-skeleton-parent></a-mixin>


    <a-mixin id="basket" cached-obj-model="obj: #basket-obj; mtl: #basket-mtl" collapse-model scale="50 50 50"></a-mixin>

    <a-mixin id="basket-hand" rotation="-90 180 0" n-skeleton-parent="part: hand; side: left; index: 0" position="0 -0.03 -0.5" sync sync-n-skeleton-parent></a-mixin>


    <a-mixin id="egg" cached-obj-model="obj: #egg-obj; mtl: #egg-mtl" collapse-model scale="0.05 0.05 0.05"></a-mixin>

    <a-mixin id="golden-egg" cached-obj-model="obj: #golden-egg-obj; mtl: #golden-egg-mtl" collapse-model scale="0.5 0.5 0.5"></a-mixin>

    <a-mixin id="egg-hand" rotation="0 180 90" n-skeleton-parent="part: hand; side: right; index: 0" position="-0.035 -0.04 -0.08" sync sync-n-skeleton-parent></a-mixin>

  </a-assets>

  <!-- Loading the Scoreboard -->
  <a-entity id="scoreboard" sync scoreboard="on: eggc; filter: a-animation; max: 300"></a-entity>

  <cached-obj-model scale="1.5 1.5 1.5" src="#billboard-obj" mtl="#billboard-mtl" position="3 -3.5 -10" rotation="0 105 0"></cached-obj-model>
  <a-entity n-text='text: The Altspace Egg Hunt' scale="0.5 0.5 0.5" position="3 1 -9.9" rotation="0 15 0"></a-entity>
  <a-entity n-text='text: -Leaderboard-' scale="0.25 0.25 0.25" position="1.7 0.5 -9.55" rotation="0 15 0"></a-entity>
  <a-entity id="ruleb" geometry="primitive: plane" material="src: #rules" position="4 -1 -10.15" scale="2.5 2.5 2.5" rotation="0 15 0"></a-entity>

  <!-- Attaching Background Image for Cockpit Egg Count -->

  <a-entity id="eggcountb" geometry="primitive: plane" material="src: #collected" position='-0.91 0.405 -1.76' rotation="-25 0 0" scale="0.375 0.175 0.03" n-cockpit-parent></a-entity>

  <!-- Attaching Instantiator Buttons to the Cockpit -->
  <a-entity id="earsb-head-instantiator" geometry="primitive: box" material="src: #earsb-icon" position='-0.81 0.205 -1.65' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: headg; mixin: earsb earsb-head;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="suitb-spine-instantiator" geometry="primitive: box" material="src: #suitb-icon" position='-01.01 0.205 -1.65' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: spineg; mixin: suitb suitb-spine;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="earsp-head-instantiator" geometry="primitive: box" material="src: #earsp-icon" position='-0.81 0.005 -1.55' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: headg; mixin: earsp earsp-head;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="suitp-spine-instantiator" geometry="primitive: box" material="src: #suitp-icon" position='-01.01 0.005 -1.55' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: spineg; mixin: suitp suitp-spine;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="carrot-hand-instantiator" geometry="primitive: box" material="src: #carrot-icon" position='-0.61 0.205 -1.65' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: handr; mixin: carrot carrot-hand;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="egg-hand-instantiator" geometry="primitive: box" material="src: #egg-icon" position='-0.61 0.405 -1.75' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: handr; mixin: egg egg-hand;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <a-entity id="basket-hand-instantiator" geometry="primitive: box" material="src: #basket-icon" position='-0.61 0.005 -1.55' rotation="-25 0 0" scale="0.15 0.15 0.03" n-cockpit-parent instantiator="on: click; group: handl; mixin: basket basket-hand;" wire="on: mousedown; emit: b1; targets: #b1s" wire__clicktoanim="on: click; emit: toggle;" wire__removetoanim="on: removed-last; emit: toggle;" altspace-cursor-collider="enabled: true">
    <a-animation begin="toggle" attribute="material.color" from="white" to="hotpink" dur="200" direction="alternate"></a-animation>
  </a-entity>

  <!-- Defining Sound Effects for Eggs and Buttons -->

  <a-entity id="egg1s" position="0 0 0" n-sound="src: coin1.wav; on: eggc; minDistance: 1000; maxDistance: 3000" n-skeleton-parent="part: spine;"></a-entity>
  <a-entity id="b1s" position="0 0 0" n-sound="src: b1.wav; volume: 0.2; on: b1; minDistance: 1000; maxDistance: 3000" n-skeleton-parent="part: spine;"></a-entity>


</a-scene>
</body>
</html>
